<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandar Command Center | Algo MM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'JetBrains Mono', monospace; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .bg-dark-panel { background-color: #0f1115; }
        .text-bid { color: #22c55e; }
        .text-offer { color: #ef4444; }
        .row-new { animation: highlight 0.5s ease-out; }
        @keyframes highlight { from { background-color: #1e293b; } to { background-color: transparent; } }
    </style>
</head>
<body class="bg-black text-gray-300 min-h-screen overflow-hidden">

    <nav class="border-b border-gray-800 p-4 flex justify-between items-center bg-dark-panel">
        <div class="flex items-center gap-4">
            <h1 class="text-xl font-bold text-white flex items-center gap-2">
                <i data-lucide="shield-check" class="text-blue-500"></i> BANDAR ENGINE v1.0
            </h1>
            <span class="bg-green-900/30 text-green-500 text-xs px-2 py-1 rounded border border-green-500/50 flex items-center gap-1">
                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> SYSTEM ACTIVE
            </span>
        </div>
        <div class="flex gap-6 text-sm">
            <div>WAREHOUSE: <span id="wh-total" class="text-white">125,400 Lot</span></div>
            <div>AVG PRICE: <span class="text-blue-400">452.12</span></div>
            <div class="text-gray-500">API: <span class="text-yellow-500">CONNECTED (SIM)</span></div>
        </div>
    </nav>

    <main class="grid grid-cols-12 gap-1 p-1 h-[calc(100vh-68px)]">
        
        <div class="col-span-3 bg-dark-panel rounded flex flex-col">
            <div class="p-2 border-b border-gray-800 flex justify-between items-center">
                <span class="text-xs font-bold uppercase">Running Trade (SoT)</span>
                <span id="sot-indicator" class="text-[10px] bg-red-900/30 text-red-500 px-2 py-0.5 rounded">SoT: 0/sec</span>
            </div>
            <div id="running-trade" class="flex-1 overflow-y-auto scrollbar-hide text-[11px] p-2 space-y-1">
                </div>
        </div>

        <div class="col-span-6 flex flex-col gap-1">
            <div class="flex-1 bg-dark-panel rounded grid grid-cols-2 gap-0.5 relative">
                <div class="p-2">
                    <div class="text-center text-xs font-bold text-bid border-b border-gray-800 pb-1 mb-2">BID (BUY)</div>
                    <div id="bid-list" class="space-y-1"></div>
                </div>
                <div class="p-2 border-l border-gray-800">
                    <div class="text-center text-xs font-bold text-offer border-b border-gray-800 pb-1 mb-2">OFFER (SELL)</div>
                    <div id="offer-list" class="space-y-1"></div>
                </div>
                <div class="absolute inset-y-0 left-1/2 w-[1px] bg-gray-800"></div>
            </div>

            <div class="h-48 bg-dark-panel rounded p-4">
                <h3 class="text-xs font-bold mb-3 border-b border-gray-800 pb-1">ALGO EXECUTION (MANIPULATION)</h3>
                <div class="grid grid-cols-3 gap-4">
                    <div class="space-y-2">
                        <label class="text-[10px] text-gray-500 block">ALGO TYPE</label>
                        <select class="w-full bg-black border border-gray-700 text-xs p-2 rounded outline-none focus:border-blue-500">
                            <option>Layering (Auto-Fill)</option>
                            <option>Iceberg Order</option>
                            <option>Wash Trade (Churning)</option>
                            <option>Spoofing Wall</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] text-gray-500 block">TOTAL VOLUME (LOT)</label>
                        <input type="number" value="10000" class="w-full bg-black border border-gray-700 text-xs p-2 rounded outline-none">
                    </div>
                    <div class="flex items-end">
                        <button onclick="alert('Algo Injected to Exchange!')" class="w-full bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold py-2 rounded transition">
                            INJECT ALGORITHM
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-span-3 flex flex-col gap-1">
            <div class="flex-1 bg-dark-panel rounded p-3">
                <h3 class="text-xs font-bold mb-3 border-b border-gray-800 pb-1">WAREHOUSE TRACKING</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500">Broker AZ (Accum)</span>
                        <span class="text-bid">45,000 Lot</span>
                    </div>
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500">Broker PD (Retail)</span>
                        <span class="text-offer">12,200 Lot</span>
                    </div>
                    <div class="w-full bg-gray-800 h-1.5 rounded-full overflow-hidden">
                        <div class="bg-blue-500 h-full w-[65%]"></div>
                    </div>
                    <p class="text-[10px] text-gray-500 italic">Target: 200k Lot before Markup</p>
                </div>
            </div>
            <div class="h-48 bg-dark-panel rounded p-3">
                <h3 class="text-xs font-bold mb-2 border-b border-gray-800 pb-1 text-yellow-500">MARKET IMPACT SIM</h3>
                <div class="bg-black/50 p-2 rounded border border-yellow-900/30">
                    <p class="text-[10px] text-gray-400">If you dump <span class="text-white">50,000 Lot</span>:</p>
                    <p class="text-lg font-bold text-offer">-14 TICKS</p>
                    <p class="text-[10px] text-gray-500 mt-1">Slippage: 2.8% Est.</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Inisialisasi Ikon
        lucide.createIcons();

        // SIMULASI DATA ORDER BOOK
        const bidList = document.getElementById('bid-list');
        const offerList = document.getElementById('offer-list');
        const runningTrade = document.getElementById('running-trade');
        const sotIndicator = document.getElementById('sot-indicator');

        let price = 500;
        let tradeCount = 0;

        function updateOrderBook() {
            let bids = '';
            let offers = '';
            for(let i=1; i<=10; i++) {
                // Bid Side (Buyer)
                bids += `
                    <div class="flex justify-between text-[11px] hover:bg-white/5 p-1 rounded transition cursor-pointer">
                        <span class="text-gray-500">${1000 * i}</span>
                        <span class="text-bid font-bold">${price - i}</span>
                    </div>`;
                // Offer Side (Seller)
                offers += `
                    <div class="flex justify-between text-[11px] hover:bg-white/5 p-1 rounded transition cursor-pointer">
                        <span class="text-offer font-bold">${price + i}</span>
                        <span class="text-gray-500">${800 * i}</span>
                    </div>`;
            }
            bidList.innerHTML = bids;
            offerList.innerHTML = offers;
        }

        // SIMULASI RUNNING TRADE (TAPE)
        function addTrade() {
            tradeCount++;
            const time = new Date().toLocaleTimeString('en-GB', { hour12: false });
            const side = Math.random() > 0.5 ? 'text-bid' : 'text-offer';
            const action = side === 'text-bid' ? 'B' : 'S';
            const vol = Math.floor(Math.random() * 500) + 1;
            
            const tradeRow = document.createElement('div');
            tradeRow.className = `flex justify-between border-b border-gray-900 pb-1 row-new ${side}`;
            tradeRow.innerHTML = `
                <span>${time}</span>
                <span class="font-bold">${price}</span>
                <span>${vol}</span>
                <span class="bg-gray-800 px-1 rounded text-[9px] text-gray-400">${action}</span>
            `;
            
            runningTrade.prepend(tradeRow);
            if (runningTrade.children.length > 50) runningTrade.lastChild.remove();
        }

        // Hitung Speed of Tape (SoT)
        setInterval(() => {
            sotIndicator.innerText = `SoT: ${tradeCount}/sec`;
            sotIndicator.className = tradeCount > 5 ? 
                "text-[10px] bg-red-900 text-white px-2 py-0.5 rounded animate-bounce" : 
                "text-[10px] bg-gray-800 text-gray-400 px-2 py-0.5 rounded";
            tradeCount = 0;
        }, 1000);

        // Jalankan Simulasi
        updateOrderBook();
        setInterval(addTrade, 200); // Trade masuk setiap 200ms
        setInterval(() => {
            price += Math.random() > 0.5 ? 1 : -1;
            updateOrderBook();
        }, 2000);

    </script>
</body>
</html>
