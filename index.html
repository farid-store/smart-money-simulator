<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>SMM PROFESSIONAL TERMINAL v6.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #0a0b0d; color: #d1d4dc; font-family: 'Inter', sans-serif; overflow: hidden; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .border-gray { border-color: #2a2e39; }
        .bg-darker { background: #131722; }
        .text-up { color: #089981; }
        .text-down { color: #f23645; }
        .bg-up { background: rgba(8, 153, 129, 0.2); }
        .bg-down { background: rgba(242, 54, 69, 0.2); }
        canvas { image-rendering: -webkit-optimize-contrast; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #363a45; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col text-[11px] select-none">

    <header class="h-12 border-b border-gray bg-darker flex items-center px-4 justify-between">
        <div class="flex items-center gap-6">
            <div class="flex items-baseline gap-2">
                <span class="text-lg font-bold text-white tracking-tighter uppercase">GOTO</span>
                <span id="header-price" class="text-lg font-bold text-up">112</span>
                <span id="header-diff" class="text-up font-mono">+4 (3.70%)</span>
            </div>
            <div class="h-8 w-[1px] bg-gray-700"></div>
            <div class="flex gap-4 opacity-70 font-mono">
                <div>OPEN <span class="text-white">108</span></div>
                <div>HIGH <span id="header-high" class="text-white">115</span></div>
                <div>LOW <span id="header-low" class="text-white">107</span></div>
                <div>VOL <span id="header-vol" class="text-white">1.2B</span></div>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <div class="bg-blue-600/20 text-blue-400 px-2 py-1 rounded border border-blue-500/30 font-bold uppercase">Institutional Access</div>
            <div id="clock" class="mono text-gray-500">15:59:59</div>
        </div>
    </header>

    <div class="flex-1 flex overflow-hidden">
        
        <aside class="w-[320px] border-r border-gray flex flex-col">
            <div class="flex-1 flex flex-col min-h-0 bg-darker">
                <div class="grid grid-cols-4 text-gray-500 py-1 px-2 border-b border-gray font-bold text-[9px]">
                    <span>BID VOL</span><span>BID</span><span>OFFER</span><span>OFFER VOL</span>
                </div>
                <div id="orderbook-list" class="flex-1 overflow-y-auto font-mono">
                    </div>
            </div>
            
            <div class="h-1/3 border-t border-gray flex flex-col bg-black">
                <div class="px-2 py-1 border-b border-gray text-gray-500 font-bold uppercase text-[9px]">Running Trades</div>
                <div id="running-trades" class="flex-1 overflow-hidden mono text-[10px] p-2 space-y-0.5">
                    </div>
            </div>
        </aside>

        <main class="flex-1 flex flex-col relative">
            <div class="flex-1 bg-[#131722] relative">
                <canvas id="mainChart"></canvas>
            </div>
            
            <div class="h-24 bg-darker border-t border-gray flex items-center px-6 gap-8">
                <div class="flex flex-col gap-1">
                    <span class="text-gray-500 text-[9px] uppercase font-bold">Market Maker Mode</span>
                    <div class="flex gap-2">
                        <button onclick="Engine.manipulate('ACCUMULATE')" class="px-4 py-2 bg-up border border-green-500/50 text-up rounded hover:bg-green-500 hover:text-white font-bold transition-all">ACCUMULATE</button>
                        <button onclick="Engine.manipulate('MARKUP')" class="px-4 py-2 bg-blue-600/20 border border-blue-500/50 text-blue-400 rounded hover:bg-blue-600 hover:text-white font-bold transition-all">MARK UP</button>
                        <button onclick="Engine.manipulate('DISTRIBUTE')" class="px-4 py-2 bg-down border border-red-500/50 text-down rounded hover:bg-red-500 hover:text-white font-bold transition-all">DISTRIBUTE</button>
                    </div>
                </div>
                <div class="h-12 w-[1px] bg-gray-800"></div>
                <div class="flex flex-col gap-1">
                    <span class="text-gray-500 text-[9px] uppercase font-bold">Manual Execution</span>
                    <div class="flex gap-2">
                        <button onmousedown="Engine.manualExecution('BUY')" class="w-10 h-10 bg-green-600 text-black font-black rounded active:scale-90">HKA</button>
                        <button onmousedown="Engine.manualExecution('SELL')" class="w-10 h-10 bg-red-600 text-black font-black rounded active:scale-90">HKI</button>
                    </div>
                </div>
                <div class="ml-auto flex items-center gap-6">
                    <div class="text-right">
                        <span class="text-gray-500 text-[9px] block">AVG PRICE</span>
                        <span id="avg-price" class="text-lg font-bold text-white mono">0</span>
                    </div>
                    <div class="text-right">
                        <span class="text-gray-500 text-[9px] block">TOTAL LOTS</span>
                        <span id="total-lots" class="text-lg font-bold text-blue-400 mono">0</span>
                    </div>
                </div>
            </div>
        </main>

        <aside class="w-[240px] border-l border-gray bg-darker flex flex-col">
            <div class="p-2 border-b border-gray font-bold text-gray-400 uppercase text-[9px]">Broker Summary (Top 5)</div>
            <div class="flex-1 p-2 space-y-4">
                <div id="buyer-list" class="space-y-1">
                    <div class="text-[9px] text-up font-bold mb-1">TOP BUYERS</div>
                    </div>
                <div id="seller-list" class="space-y-1">
                    <div class="text-[9px] text-down font-bold mb-1">TOP SELLERS</div>
                    </div>
            </div>
            <div class="p-4 bg-black border-t border-gray">
                <div class="text-[9px] text-gray-500 mb-1">NET POSITION</div>
                <div id="net-position" class="text-xl font-black text-white">$0</div>
            </div>
        </aside>
    </div>

    <script>
        // --- DATA & STATE ---
        const Engine = {
            price: 110,
            prevClose: 108,
            inventory: 0,
            avgEntry: 0,
            candles: [],
            orderbook: { bid: [], offer: [] },
            brokers: { 
                YP: { buy: 0, sell: 0 }, CC: { buy: 0, sell: 0 }, 
                DH: { buy: 0, sell: 0 }, MG: { buy: 0, sell: 0 }, 
                PD: { buy: 0, sell: 0 }, BK: { buy: 0, sell: 0 }
            },
            
            init() {
                this.generateOrderbook();
                this.loop();
                window.addEventListener('resize', () => this.resize());
                this.resize();
            },

            resize() {
                const c = document.getElementById('mainChart');
                c.width = c.parentElement.clientWidth;
                c.height = c.parentElement.clientHeight;
            },

            generateOrderbook() {
                this.orderbook.bid = [];
                this.orderbook.offer = [];
                for(let i=0; i<10; i++) {
                    this.orderbook.bid.push({ p: this.price - (i+1), v: Math.floor(Math.random()*10000) });
                    this.orderbook.offer.push({ p: this.price + i, v: Math.floor(Math.random()*10000) });
                }
            },

            manualExecution(side) {
                const targetPrice = side === 'BUY' ? this.orderbook.offer[0].p : this.orderbook.bid[0].p;
                const lot = 500 + Math.floor(Math.random()*1000);
                
                // Update Inventory
                if(side === 'BUY') {
                    const totalCost = (this.inventory * this.avgEntry) + (lot * targetPrice);
                    this.inventory += lot;
                    this.avgEntry = totalCost / this.inventory;
                    this.brokers.MG.buy += lot;
                } else {
                    this.inventory -= lot;
                    this.brokers.MG.sell += lot;
                }

                this.price = targetPrice;
                this.generateOrderbook();
                UI.pushTrade(side, targetPrice, lot, 'MG');
            },

            manipulate(mode) {
                if(mode === 'MARKUP') this.price += 1;
                if(mode === 'DISTRIBUTE') this.price -= 1;
                this.generateOrderbook();
                UI.showAlert("ALGO: " + mode);
            },

            loop() {
                // Simulasikan Retail Noise
                if(Math.random() > 0.7) {
                    const side = Math.random() > 0.5 ? 'BUY' : 'SELL';
                    const brks = ['YP', 'PD', 'CC', 'DH'];
                    const b = brks[Math.floor(Math.random()*brks.length)];
                    const p = side === 'BUY' ? this.orderbook.offer[0].p : this.orderbook.bid[0].p;
                    const v = Math.floor(Math.random()*200);
                    
                    this.brokers[b][side === 'BUY' ? 'buy' : 'sell'] += v;
                    UI.pushTrade(side, p, v, b);
                }

                UI.update();
                requestAnimationFrame(() => this.loop());
            }
        };

        const UI = {
            update() {
                // Header
                const p = Engine.price;
                const diff = p - Engine.prevClose;
                const pct = (diff / Engine.prevClose * 100).toFixed(2);
                document.getElementById('header-price').innerText = p;
                document.getElementById('header-price').className = `text-lg font-bold ${diff >= 0 ? 'text-up' : 'text-down'}`;
                document.getElementById('header-diff').innerText = `${diff >= 0 ? '+':''}${diff} (${pct}%)`;
                document.getElementById('header-diff').className = `font-mono ${diff >= 0 ? 'text-up' : 'text-down'}`;

                // Orderbook
                const obList = document.getElementById('orderbook-list');
                let obHtml = '';
                for(let i=0; i<10; i++) {
                    const bid = Engine.orderbook.bid[i];
                    const off = Engine.orderbook.offer[i];
                    obHtml += `
                        <div class="grid grid-cols-4 px-2 h-6 items-center border-b border-[#1a1e2a]">
                            <span class="text-right pr-4 text-zinc-500">${bid.v.toLocaleString()}</span>
                            <span class="text-up font-bold">${bid.p}</span>
                            <span class="text-down font-bold text-right">${off.p}</span>
                            <span class="pl-4 text-zinc-500">${off.v.toLocaleString()}</span>
                        </div>`;
                }
                obList.innerHTML = obHtml;

                // Stats
                document.getElementById('avg-price').innerText = Engine.avgEntry.toFixed(1);
                document.getElementById('total-lots').innerText = Engine.inventory.toLocaleString();
                
                const net = (Engine.price - Engine.avgEntry) * Engine.inventory;
                const netEl = document.getElementById('net-position');
                netEl.innerText = (net >= 0 ? '+' : '') + net.toLocaleString(undefined, {maximumFractionDigits:0});
                netEl.className = `text-xl font-black ${net >= 0 ? 'text-up' : 'text-down'}`;

                // Broker Sum
                this.updateBrokers();
                this.drawChart();
            },

            pushTrade(side, p, v, b) {
                const rt = document.getElementById('running-trades');
                const row = document.createElement('div');
                row.className = `flex justify-between ${side === 'BUY' ? 'text-up' : 'text-down'}`;
                row.innerHTML = `<span>15:59</span><span>${b}</span><span>${side === 'BUY' ? 'B' : 'S'}</span><span>${p}</span><span>${v}</span>`;
                rt.prepend(row);
                if(rt.children.length > 15) rt.lastChild.remove();
            },

            updateBrokers() {
                const bList = Object.entries(Engine.brokers)
                    .sort((a,b) => b[1].buy - a[1].buy)
                    .slice(0, 5);
                
                document.getElementById('buyer-list').innerHTML = '<div class="text-[9px] text-up font-bold mb-1 uppercase">Top Buyers</div>' + 
                    bList.map(([name, data]) => `<div class="flex justify-between text-[10px]"><span>${name}</span><span class="mono">${data.buy.toLocaleString()}</span></div>`).join('');
            },

            drawChart() {
                const canvas = document.getElementById('mainChart');
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#131722';
                ctx.fillRect(0,0,canvas.width, canvas.height);
                
                // Grid
                ctx.strokeStyle = '#2a2e39';
                ctx.lineWidth = 0.5;
                for(let i=0; i<canvas.width; i+=100) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }
                for(let i=0; i<canvas.height; i+=50) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); }

                // Price line (Simplified for performance)
                ctx.strokeStyle = '#2962ff';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, canvas.height/2);
                ctx.lineTo(canvas.width, canvas.height/2 + (Math.sin(Date.now()/500)*20));
                ctx.stroke();
            },

            showAlert(msg) {
                // Toast logic
            }
        };

        Engine.init();
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
        }, 1000);
    </script>
</body>
</html>
